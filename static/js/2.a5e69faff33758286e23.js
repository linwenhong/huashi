webpackJsonp([2],{"7zQA":function(t,i){},GD2k:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("BHhu"),a=e("8IWg"),o=e("9+VK"),s=e("TNi3"),c=e("jNku"),r=e("+0rj"),d=e("BXxX"),l={name:"school",data:function(){return{api:n.a,code:"school",dataKeys:a.g,notice:a.h.school,items:[],total:0,page:1,pageSize:n.c,condition:{},searchOptions:[{label:"标题",key:"name"}],operation:{}}},methods:{publicSearch:function(t){for(var i in t)this.condition[i]=t[i];this.getDataTables()},search:function(){this.getDataTables()},pageChange:function(t){this.getDataTables(t)},getDataTables:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={type:this.notice.type};for(var n in i&&(e.page=i),this.condition)this.condition[n]&&(e[n]=this.condition[n]);d.a.Notice.get(e).then(function(e){200==e.code&&(t.page=i,t.items=e.data.data,t.total=e.data.total,setTimeout(function(){return c.a.iCheck()},200))})},download:function(t){this.fileExport({ids:[t.id],model:this.code})},fileExport:function(t){d.a.FileDownload(t).then(function(t){r.a.download(t)})},delConfirm:function(t){var i=this;d.a.Notice.del(t.id).then(function(t){200==t.code&&i.getDataTables()})},toTop:function(t,i){var e=this;d.a.Notice.edit(t.id,{top:i}).then(function(t){200==t.code&&(toastr.success(t.msg),e.getDataTables())})},add:function(){s.a.addDetailsTab("/views/notice/details/new?type="+this.notice.type,this.notice.name+"-新增")},see:function(t){s.a.addDetailsTab("/views/notice/details/"+t.id+"?type="+this.notice.type+"&readonly=readonly",this.notice.name+"-详情-"+t.id)},edit:function(t){s.a.addDetailsTab("/views/notice/details/"+t.id+"?type="+this.notice.type,this.notice.name+"-详情-"+t.id)}},created:function(){o.a.hasPermission("post_notification")&&(this.operation.add=!0),o.a.hasPermission("update_notification")&&(this.operation.edit=!0),o.a.hasPermission("delete_notification")&&(this.operation.del=!0),o.a.hasPermission("top_notification")&&(this.operation.top=!0),this.getDataTables()},mounted:function(){}},h={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"wrapper wrapper-content"},[e("div",{staticClass:"ibox float-e-margins"},[t._m(0),t._v(" "),e("div",{staticClass:"ibox-content"},[e("public-search",{attrs:{hideStatus:!0,pageName:t.code,condition:t.condition,searchOptions:t.searchOptions},on:{search:t.publicSearch}}),t._v(" "),t.operation.add?e("div",{staticClass:"text-left"},[e("button",{staticClass:"btn btn-primary",on:{click:function(i){t.add()}}},[t._v("新增")])]):t._e(),t._v(" "),e("table",{staticClass:"table table-bordered text-center"},[t._m(1),t._v(" "),e("tbody",t._l(t.items,function(i,n){return e("tr",{key:i.id},[e("td",[t._v(t._s(i.id))]),t._v(" "),e("td",[t._v(t._s(i.name))]),t._v(" "),e("td",[i.pic?e("img",{staticClass:"icon",attrs:{src:t.api+i.pic}}):t._e()]),t._v(" "),e("td",[t.operation.edit?e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){t.edit(i)}}},[t._v("编辑")]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){t.see(i)}}},[t._v("查看")]),t._v(" "),t.operation.del?e("delete",{attrs:{item:i},on:{delConfirm:t.delConfirm}}):t._e(),t._v(" "),t.operation.top&&0==i.top?e("button",{staticClass:"btn btn-sm btn-warning",on:{click:function(e){t.toTop(i,1)}}},[t._v("置顶")]):t._e(),t._v(" "),t.operation.top&&1==i.top?e("button",{staticClass:"btn btn-sm btn-info",on:{click:function(e){t.toTop(i,0)}}},[t._v("取消置顶")]):t._e()],1)])}))]),t._v(" "),e("vue-pagination",{attrs:{"current-page":t.page,total:t.total,"page-size":t.pageSize,theme:"gray"},on:{"current-change":t.pageChange}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"ibox-title"},[i("h5",[this._v("学校通知")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("thead",[i("tr",[i("th",[this._v("ID")]),this._v(" "),i("th",[this._v("标题")]),this._v(" "),i("th",[this._v("图片")]),this._v(" "),i("th",[this._v("操作")])])])}]};var p=e("VU/8")(l,h,!1,function(t){e("7zQA")},"data-v-e36a80a4",null);i.default=p.exports}});
//# sourceMappingURL=2.a5e69faff33758286e23.js.map