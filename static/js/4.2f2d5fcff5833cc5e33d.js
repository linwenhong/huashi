webpackJsonp([4],{K8sB:function(s,t){},kAwP:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("9+VK"),i=e("BXxX"),o={name:"modifyPassword",data:function(){return{id:this.$route.params.id,name:this.$route.query.name,form:{},basic:{},new_password:null,user:a.a.getUser()}},created:function(){this.basic.email=this.user.email,this.basic.phone=this.user.phone,this.basic.name=this.user.name},methods:{editBasic:function(){i.a.Users.edit(this.user.id,this.basic).then(function(s){200==s.code?(toastr.success(s.msg),setTimeout(function(){parent.location.href="/login"},1e3)):toastr.error(s.msg)})},confirm:function(){var s=this;if(this.id||this.form.old_password)if(this.form.new_password)if(this.form.new_password==Number(this.new_password)||this.form.new_password.length<6)toastr.warning("请输入6位以上的字母加数字");else if(this.form.new_password==this.new_password){var t=this.id?this.id:this.user.id;i.a.Users.edit(t,this.form).then(function(t){200==t.code?(toastr.success(t.msg),setTimeout(function(){s.id||(parent.location.href="/login")},1e3)):toastr.error(t.msg)})}else toastr.error("两次输入的密码不同");else toastr.warning("密码不能为空");else toastr.warning("请输入旧密码")}}},r={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:" text-center loginscreen  animated fadeInDown modify"},[e("div",{staticClass:"row mt"},[e("h1",[s._v("修改"+s._s(s.name)+"密码")]),s._v(" "),s.id?s._e():e("form",{staticClass:"form-horizontal middle-box",on:{submit:function(t){return t.preventDefault(),s.editBasic(t)}}},[e("div",{staticClass:"form-group"},[s._m(0),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.basic.name,expression:"basic.name"}],staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:s.basic.name},on:{input:function(t){t.target.composing||s.$set(s.basic,"name",t.target.value)}}})])]),s._v(" "),e("div",{staticClass:"form-group"},[s._m(1),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.basic.phone,expression:"basic.phone"}],staticClass:"form-control",attrs:{type:"text",maxlength:"11",name:"phone",onkeyup:"this.value=this.value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:s.basic.phone},on:{input:function(t){t.target.composing||s.$set(s.basic,"phone",t.target.value)}}})])]),s._v(" "),e("div",{staticClass:"form-group"},[s._m(2),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.basic.email,expression:"basic.email"}],staticClass:"form-control",attrs:{type:"email",name:"email"},domProps:{value:s.basic.email},on:{input:function(t){t.target.composing||s.$set(s.basic,"email",t.target.value)}}})])]),s._v(" "),s._m(3),s._v(" "),e("hr")]),s._v(" "),e("form",{staticClass:"form-horizontal middle-box",on:{submit:function(t){return t.preventDefault(),s.confirm(t)}}},[s.id?s._e():[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-3"},[s._v("旧密码")]),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.form.old_password,expression:"form.old_password"}],staticClass:"form-control",attrs:{type:"password",onkeyup:"this.value=this.value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:s.form.old_password},on:{input:function(t){t.target.composing||s.$set(s.form,"old_password",t.target.value)}}})])])],s._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-3"},[s._v("修改密码")]),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.form.new_password,expression:"form.new_password"}],staticClass:"form-control",attrs:{type:"password",onkeyup:"this.value=this.value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:s.form.new_password},on:{input:function(t){t.target.composing||s.$set(s.form,"new_password",t.target.value)}}})])]),s._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-3"},[s._v("确认密码")]),s._v(" "),e("div",{staticClass:"col-sm-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.new_password,expression:"new_password"}],staticClass:"form-control",attrs:{type:"password",onkeyup:"this.value=this.value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:s.new_password},on:{input:function(t){t.target.composing||(s.new_password=t.target.value)}}})])]),s._v(" "),s._m(4)],2)])])},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("label",{staticClass:"control-label col-sm-3"},[t("span",{staticClass:"MustFill"},[this._v("*")]),this._v("真实姓名")])},function(){var s=this.$createElement,t=this._self._c||s;return t("label",{staticClass:"control-label col-sm-3"},[t("span",{staticClass:"MustFill"},[this._v("*")]),this._v("联系电话")])},function(){var s=this.$createElement,t=this._self._c||s;return t("label",{staticClass:"control-label col-sm-3"},[t("span",{staticClass:"MustFill"},[this._v("*")]),this._v("邮箱")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-offset-3 col-sm-9"},[t("button",{staticClass:"btn btn-primary block full-width",attrs:{type:"submit"}},[this._v("确定")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-offset-3 col-sm-9"},[t("button",{staticClass:"btn btn-primary block full-width",attrs:{type:"submit"}},[this._v("确定")])])])}]};var n=e("VU/8")(o,r,!1,function(s){e("K8sB")},"data-v-d4f55d70",null);t.default=n.exports}});
//# sourceMappingURL=4.2f2d5fcff5833cc5e33d.js.map