{"version":3,"sources":["webpack:///src/components/Management/customForm/details.vue","webpack:///./src/components/Management/customForm/details.vue?d398","webpack:///./src/components/Management/customForm/details.vue"],"names":["details","name","data","code","this","$route","query","types","value","type","form","dataKeys","key","items","editItem","canSubmit","showDetails","operation","validate","methods","getName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","option","err","return","typeChange","length","getDataTables","_this","service","Customize","get","model","then","response","add","clear","edit","item","can_null","display","field_type","field_name","submit","_this2","getFormVal","result","confirm","toastr","warning","verification","_this3","promise_default","a","resolver","$","valid","request","_this4","id","req","responseHandle","catch","error","success","msg","delConfirm","_this5","from","swal","resetForm","cancel","tabReload","created","cache","hasPermission","del","mounted","customForm_details","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","on","click","$event","_e","_l","index","_s","attrs","directives","rawName","expression","preventDefault","required","aria-required","disabled","change","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","_value","$set","multiple","domProps","input","composing","onkeyup","staticRenderFns","staticStyle","color","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/36.cb4fdf51bc7e6da261b4.js","sourcesContent":["<template>\n  <div class=\"wrapper wrapper-content\">\n    <div class=\"ibox\">\n      <div class=\"ibox-title\">\n        <h5>自定义数据表字段</h5>\n      </div>\n\n      <div class=\"ibox-content\">\n        <div class=\"text-left\">\n          <button v-if=\"operation.add\" class=\"btn btn-primary\" @click=\"add()\">新增</button>\n          <b class=\"btn btn-white\" @click=\"cancel\">返回数据表列表</b>\n        </div>\n\n        <table class=\"table table-bordered text-center\">\n          <thead>\n          <tr>\n            <th>ID</th>\n            <th>字段类型</th>\n            <th>数据表列名</th>\n            <th>能否为空</th>\n            <th>字符长度</th>\n            <th>表头文本</th>\n            <th>操作</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"(item, index) of items\">\n            <td>{{ item.id }}</td>\n            <td>{{ getName(item.type) }}</td>\n            <td>{{ item.name }}</td>\n            <td>{{ item.can_null == 1 ? '能' : '否' }}</td>\n            <td>{{ item.length }}</td>\n            <td>{{ item.display }}</td>\n            <td>\n              <button v-if=\"operation.edit\" class=\"btn btn-sm btn-primary\" @click=\"edit(item)\">编辑</button>\n              <delete v-if=\"operation.del\" @delConfirm=\"delConfirm\" v-bind:item=\"item\"></delete>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <div class=\"ibox\" v-show=\"showDetails\">\n      <div class=\"ibox-title\">\n        <h5>详情</h5>\n      </div>\n\n      <div class=\"ibox-content\">\n        <form class=\"form-horizontal\" @submit.prevent=\"submit\" id=\"form\">\n          <div class=\"row\">\n            <div class=\"col-sm-6\">\n              <div class=\"form-group\">\n                <label class=\"col-sm-5 control-label\">字段类型</label>\n                <div class=\"col-sm-4 right\">\n                  <select class=\"form-control\" v-model=\"form.type\" required=\"\" aria-required=\"true\"\n                          name=\"field_type\" :disabled=\"editItem.id\" @change=\"typeChange()\">\n                    <option v-for=\"option of types\" :value=\"option.type\">{{ option.name }}</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-6\">\n              <div class=\"form-group\">\n                <label class=\"col-sm-5 control-label\">能否为空</label>\n                <div class=\"col-sm-4 right\">\n                  <select class=\"form-control\" v-model=\"form.can_null\" required=\"\" aria-required=\"true\"\n                          name=\"can_null\" :disabled=\"editItem.id\">\n                    <option value=\"1\">能</option>\n                    <option value=\"0\">不能</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-6\">\n              <div class=\"form-group\">\n                <label class=\"col-sm-5 control-label\">页面文本</label>\n                <div class=\"col-sm-4 right\">\n                  <input class=\"form-control\" v-model=\"form.display\" required=\"\" aria-required=\"true\" name=\"display\">\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-6\">\n              <div class=\"form-group\">\n                <label class=\"col-sm-5 control-label\">数据表列名</label>\n                <div class=\"col-sm-4 right\">\n                  <input class=\"form-control\" v-model=\"form.field_name\" required=\"\" aria-required=\"true\"\n                         name=\"field_name\" :disabled=\"editItem.id\" onkeyup=\"this.value=this.value.replace(/[^a-zA-Z]/g,'')\">\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-6\">\n              <div class=\"form-group\">\n                <label class=\"col-sm-5 control-label\">字符长度</label>\n                <div class=\"col-sm-4 right\">\n                  <input type=\"number\" class=\"form-control\" v-model=\"form.length\" required=\"\" aria-required=\"true\"\n                         name=\"length\" :disabled=\"editItem.id || form.type == 'isDateTime'\">\n                </div>\n              </div>\n            </div>\n            <div class=\"remark\">\n              <p>说明：</p>\n              <p>1、<span style=\"color: red\">“数据表列名”</span>请输入<span style=\"color: red\">英文单词格式</span>,不能使用空格及特殊字符,且是<span style=\"color: red\">唯一值</span></p>\n              <p>2、系统已使用的“数据表列名”不可再设置(如id, name)</p>\n              <p>3、一个字母或数字占用一个字符,一个汉字占用两个字符</p>\n            </div>\n          </div>\n          <div class=\"text-center row\">\n            <button v-if=\"canSubmit\" type=\"submit\" class=\"btn btn-primary\">保存</button>\n            <button v-if=\"!canSubmit\" class=\"btn btn-default\">保存</button>\n            <b class=\"btn btn-white\" @click=\"clear\">关闭</b>\n          </div>\n        </form>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport { collegeFacilitiesAreaKeys } from '@/assets/constant'\nimport Cache from '@/assets/cache'\nimport dataService from '@/assets/method/data'\nimport tabsService from '@/assets/template/tabs'\nimport Service from '@/assets/service/service'\nexport default {\n  name: 'customFormDetails',\n  data () {\n    return {\n      code: this.$route.query['code'],\n      types: [\n        { name: '文本', value: 'varchar', type: 'text' },\n        { name: '数字', value: 'varchar', type: 'number' },\n        { name: '日期', value: 'varchar', type: 'isDateTime' }\n      ],\n      form: {},\n      dataKeys: [\n        { name: '能否为空', key: 'can_null' },\n        { name: '表头文本', key: 'display' },\n        { name: '数据表列名', key: 'field_name' },\n        { name: '长度', key: 'length' }\n      ],\n      items: [],\n      editItem: {},\n      canSubmit: true,\n      showDetails: false,\n      operation: {},\n      validate: null\n    }\n  },\n  methods: {\n    getName (type) {\n      for (const option of this.types) {\n        if (type == option.type) {\n          return option.name\n        }\n      }\n    },\n    typeChange () {\n      if (this.form.type == 'isDateTime') {\n        this.form.length = 20\n      }\n    },\n    getDataTables () {\n      Service.Customize.get({ model: this.code }).then(response => {\n        if (response.code == 200) {\n          this.items = response.data\n        }\n      })\n    },\n    add () {\n      this.clear()\n      this.showDetails = true\n    },\n    edit (item) {\n      this.showDetails = true\n      this.editItem = item\n      this.form = {\n        can_null: item.can_null,\n        display: item.display,\n        type: item.type,\n        field_type: item.field_type,\n        length: item.length,\n        field_name: item.name\n      }\n    },\n    submit () {\n      if (!this.form.display) {\n        toastr.warning('请填写页面文本')\n        return\n      }\n      if (!this.form.field_name) {\n        toastr.warning('请填写数据表列名')\n        return\n      }\n      if (!this.form.length) {\n        toastr.warning('请填写字符长度')\n        return\n      }\n      dataService.getFormVal(this.dataKeys, this.form).then(result => this.confirm(result))\n    },\n    verification () {\n      return new Promise(resolver => {\n        if (!this.canSubmit) {\n          return resolver(false)\n        }\n        this.canSubmit = false\n        if (!$('#form').valid()) {\n          toastr.warning('请完善提交数据')\n          return resolver(false)\n        }\n        resolver(true)\n      })\n    },\n    confirm(request) {\n      request['type'] = this.form.type\n      switch (request['type']) {\n        case 'text':\n          request['field_type'] = 'varchar'\n          break\n        case 'number':\n          request['field_type'] = 'varchar'\n          break\n        case 'isDateTime':\n          request['field_type'] = 'varchar'\n          break\n      }\n      this.verification().then(result => {\n        if (!result) {\n          this.canSubmit = true\n        } else {\n          request['model'] = this.code\n          request['from'] = 'add'\n          if (this.editItem.id) {\n            const req = {\n              display: this.form.display\n            }\n            Service.Customize.edit(this.editItem.id,  req).then(response => this.responseHandle(response)).catch(error => this.canSubmit = true)\n          } else {\n            Service.Customize.add(request).then(response => this.responseHandle(response)).catch(error => this.canSubmit = true)\n          }\n        }\n      })\n    },\n    responseHandle (response) {\n      if (response.code == 200) {\n        toastr.success(response.msg)\n        this.clear()\n        this.getDataTables()\n      } else {\n        toastr.error(response.msg)\n      }\n      this.canSubmit = true\n    },\n    delConfirm (item) {\n      Service.Customize.add({\n        model: this.code,\n        from: 'drop',\n        field_name: item.name\n      }).then(response => {\n        if (response.code == 200) {\n          swal('删除成功！', '您已经永久删除了这条数据。', 'success')\n          this.getDataTables()\n        }\n      })\n    },\n    clear () {\n      this.showDetails = false\n      this.form = {\n        type: 'text',\n        can_null: 1\n      }\n      this.editItem = {}\n      dataService.resetForm(this.validate) // 重置表单验证\n    },\n    cancel () {\n      dataService.tabReload(603)\n    }\n  },\n  created () {\n    if (Cache.hasPermission('add_field')) {\n      this.operation.add = true\n    }\n    if (Cache.hasPermission('update_field')) {\n      this.operation.edit = true\n    }\n    if (Cache.hasPermission('drop_field')) {\n      this.operation.del = true\n    }\n    this.getDataTables()\n  },\n  mounted () {\n    this.validate = dataService.validate('#form') // 表单验证\n  }\n}\n</script>\n\n<style scoped>\n.remark {\n  display: inline-block;\n  width: 100%;\n  padding-left: 20px;\n  color: #999;\n}\n.text-left {\n  margin-bottom: 10px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Management/customForm/details.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper wrapper-content\"},[_c('div',{staticClass:\"ibox\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"ibox-content\"},[_c('div',{staticClass:\"text-left\"},[(_vm.operation.add)?_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){_vm.add()}}},[_vm._v(\"新增\")]):_vm._e(),_vm._v(\" \"),_c('b',{staticClass:\"btn btn-white\",on:{\"click\":_vm.cancel}},[_vm._v(\"返回数据表列表\")])]),_vm._v(\" \"),_c('table',{staticClass:\"table table-bordered text-center\"},[_vm._m(1),_vm._v(\" \"),_c('tbody',_vm._l((_vm.items),function(item,index){return _c('tr',[_c('td',[_vm._v(_vm._s(item.id))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.getName(item.type)))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(item.can_null == 1 ? '能' : '否'))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(item.length))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(item.display))]),_vm._v(\" \"),_c('td',[(_vm.operation.edit)?_c('button',{staticClass:\"btn btn-sm btn-primary\",on:{\"click\":function($event){_vm.edit(item)}}},[_vm._v(\"编辑\")]):_vm._e(),_vm._v(\" \"),(_vm.operation.del)?_c('delete',{attrs:{\"item\":item},on:{\"delConfirm\":_vm.delConfirm}}):_vm._e()],1)])}))])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDetails),expression:\"showDetails\"}],staticClass:\"ibox\"},[_vm._m(2),_vm._v(\" \"),_c('div',{staticClass:\"ibox-content\"},[_c('form',{staticClass:\"form-horizontal\",attrs:{\"id\":\"form\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"col-sm-5 control-label\"},[_vm._v(\"字段类型\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-4 right\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.type),expression:\"form.type\"}],staticClass:\"form-control\",attrs:{\"required\":\"\",\"aria-required\":\"true\",\"name\":\"field_type\",\"disabled\":_vm.editItem.id},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"type\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){_vm.typeChange()}]}},_vm._l((_vm.types),function(option){return _c('option',{domProps:{\"value\":option.type}},[_vm._v(_vm._s(option.name))])}))])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"col-sm-5 control-label\"},[_vm._v(\"能否为空\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-4 right\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.can_null),expression:\"form.can_null\"}],staticClass:\"form-control\",attrs:{\"required\":\"\",\"aria-required\":\"true\",\"name\":\"can_null\",\"disabled\":_vm.editItem.id},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"can_null\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"能\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"不能\")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"col-sm-5 control-label\"},[_vm._v(\"页面文本\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-4 right\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.display),expression:\"form.display\"}],staticClass:\"form-control\",attrs:{\"required\":\"\",\"aria-required\":\"true\",\"name\":\"display\"},domProps:{\"value\":(_vm.form.display)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"display\", $event.target.value)}}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"col-sm-5 control-label\"},[_vm._v(\"数据表列名\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-4 right\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.field_name),expression:\"form.field_name\"}],staticClass:\"form-control\",attrs:{\"required\":\"\",\"aria-required\":\"true\",\"name\":\"field_name\",\"disabled\":_vm.editItem.id,\"onkeyup\":\"this.value=this.value.replace(/[^a-zA-Z]/g,'')\"},domProps:{\"value\":(_vm.form.field_name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"field_name\", $event.target.value)}}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"col-sm-5 control-label\"},[_vm._v(\"字符长度\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-4 right\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.length),expression:\"form.length\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"required\":\"\",\"aria-required\":\"true\",\"name\":\"length\",\"disabled\":_vm.editItem.id || _vm.form.type == 'isDateTime'},domProps:{\"value\":(_vm.form.length)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"length\", $event.target.value)}}})])])]),_vm._v(\" \"),_vm._m(3)]),_vm._v(\" \"),_c('div',{staticClass:\"text-center row\"},[(_vm.canSubmit)?_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"保存\")]):_vm._e(),_vm._v(\" \"),(!_vm.canSubmit)?_c('button',{staticClass:\"btn btn-default\"},[_vm._v(\"保存\")]):_vm._e(),_vm._v(\" \"),_c('b',{staticClass:\"btn btn-white\",on:{\"click\":_vm.clear}},[_vm._v(\"关闭\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ibox-title\"},[_c('h5',[_vm._v(\"自定义数据表字段\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"ID\")]),_vm._v(\" \"),_c('th',[_vm._v(\"字段类型\")]),_vm._v(\" \"),_c('th',[_vm._v(\"数据表列名\")]),_vm._v(\" \"),_c('th',[_vm._v(\"能否为空\")]),_vm._v(\" \"),_c('th',[_vm._v(\"字符长度\")]),_vm._v(\" \"),_c('th',[_vm._v(\"表头文本\")]),_vm._v(\" \"),_c('th',[_vm._v(\"操作\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ibox-title\"},[_c('h5',[_vm._v(\"详情\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"remark\"},[_c('p',[_vm._v(\"说明：\")]),_vm._v(\" \"),_c('p',[_vm._v(\"1、\"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"“数据表列名”\")]),_vm._v(\"请输入\"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"英文单词格式\")]),_vm._v(\",不能使用空格及特殊字符,且是\"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"唯一值\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"2、系统已使用的“数据表列名”不可再设置(如id, name)\")]),_vm._v(\" \"),_c('p',[_vm._v(\"3、一个字母或数字占用一个字符,一个汉字占用两个字符\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6ece63af\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Management/customForm/details.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6ece63af\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./details.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./details.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./details.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6ece63af\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./details.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6ece63af\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Management/customForm/details.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}