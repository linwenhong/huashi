webpackJsonp([8],{"+Rmx":function(t,e){},"8NSx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BHhu"),i=(a("+0rj"),a("BXxX")),s={name:"backups",data:function(){return{items:[],total:0,page:1,pageSize:n.c,searchOptions:[{label:"时间",key:"time",type:"date"},{label:"主题",key:"theme"},{label:"类别",key:"type"}]}},methods:{pageChange:function(t){this.getDataTables(t)},getDataTables:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a={};e&&(a.page=e),i.a.Backups.get(a).then(function(a){200==a.code&&(t.page=e,t.items=a.data.data,t.total=a.data.total)})},download:function(t){var e=$("<form>");e.attr("style","display: none"),e.attr("target",""),e.attr("method","get"),e.attr("action",n.a+"sql/"+t.id),$("body").append(e),e.submit()},delConfirm:function(t){var e=this;i.a.Backups.del(t.id).then(function(t){200==t.code&&e.getDataTables()})},add:function(){var t=this;i.a.Backups.add().then(function(e){200==e.code&&t.getDataTables()})}},created:function(){this.getDataTables()},mounted:function(){}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper wrapper-content"},[a("div",{staticClass:"ibox float-e-margins"},[t._m(0),t._v(" "),a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"text-left"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.add()}}},[t._v("创建数据库备份")])]),t._v(" "),a("table",{staticClass:"table table-bordered text-center"},[t._m(1),t._v(" "),a("tbody",t._l(t.items,function(e){return a("tr",[a("td",[t._v(t._s(e.file_name))]),t._v(" "),a("td",[t._v(t._s(e.created_at))]),t._v(" "),a("td",[t._v(t._s(e.file_size))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(a){t.download(e)}}},[t._v("下载")]),t._v(" "),a("delete",{attrs:{item:e},on:{delConfirm:t.delConfirm}})],1)])}))]),t._v(" "),a("vue-pagination",{attrs:{"current-page":t.page,total:t.total,"page-size":t.pageSize,theme:"gray"},on:{"current-change":t.pageChange}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ibox-title"},[e("h5",[this._v("数据库备份")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("文件")]),this._v(" "),e("th",[this._v("时间")]),this._v(" "),e("th",[this._v("大小")]),this._v(" "),e("th",[this._v("操作")])])])}]};var r=a("VU/8")(s,o,!1,function(t){a("+Rmx")},"data-v-cb536cfa",null);e.default=r.exports}});
//# sourceMappingURL=8.fe747c2784aaa5ee7a80.js.map