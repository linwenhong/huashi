{"version":3,"sources":["webpack:///src/components/User/roleDetails.vue","webpack:///./src/components/User/roleDetails.vue?8b1f","webpack:///./src/components/User/roleDetails.vue"],"names":["roleDetails","name","data","id","this","$route","params","permissions","groups","title","group","key","methods","selectGroup","index","setCheckBoxVal","cancelGroup","$","each","checked","parent","removeClass","submit","_this","getChecked","length","request","permission_id","service","Roles","add","then","response","responseHandle","edit","toastr","warning","code","success","msg","setTimeout","tabReload","error","canSubmit","cancel","tabs","closeNowTab","created","mounted","_this2","utilize","iCheck","details","permission","map","groupData","option","inArray","push","User_roleDetails","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","on","$event","preventDefault","directives","rawName","value","expression","attrs","type","domProps","input","target","composing","click","_l","_s","item","data-name","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"iLAsDAA,GACAC,KAAA,cACAC,KAFA,WAGA,OACAC,GAAAC,KAAAC,OAAAC,OAAA,GACAC,eACAN,KAAA,GAUAO,SAEAC,MAAA,OACAC,QACAD,MAAA,UAAAN,GAAA,EAAAQ,IAAA,yBAIAF,MAAA,OACAC,QACAD,MAAA,OAAAN,GAAA,EAAAQ,IAAA,cACAF,MAAA,OAAAN,GAAA,EAAAQ,IAAA,iBACAF,MAAA,OAAAN,GAAA,EAAAQ,IAAA,iBAIAF,MAAA,QACAC,QACAD,MAAA,QAAAN,GAAA,EAAAQ,IAAA,cACAF,MAAA,QAAAN,GAAA,GAAAQ,IAAA,gBACAF,MAAA,QAAAN,GAAA,GAAAQ,IAAA,kBAIAF,MAAA,OACAC,QACAD,MAAA,OAAAN,GAAA,EAAAQ,IAAA,cACAF,MAAA,OAAAN,GAAA,EAAAQ,IAAA,gBACAF,MAAA,OAAAN,GAAA,EAAAQ,IAAA,kBAIAF,MAAA,OACAC,QACAD,MAAA,OAAAN,GAAA,GAAAQ,IAAA,sBACAF,MAAA,OAAAN,GAAA,GAAAQ,IAAA,wBACAF,MAAA,OAAAN,GAAA,GAAAQ,IAAA,wBACAF,MAAA,OAAAN,GAAA,GAAAQ,IAAA,uBAIAF,MAAA,OACAC,QACAD,MAAA,QAAAN,GAAA,GAAAQ,IAAA,cAIAF,MAAA,OACAC,QACAD,MAAA,OAAAN,GAAA,GAAAQ,IAAA,sBACAF,MAAA,OAAAN,GAAA,GAAAQ,IAAA,0BACAF,MAAA,OAAAN,GAAA,GAAAQ,IAAA,uBACAF,MAAA,OAAAN,GAAA,GAAAQ,IAAA,UACAF,MAAA,OAAAN,GAAA,GAAAQ,IAAA,wBAMAC,SACAC,YADA,SACAC,GACMZ,EAAA,EAANa,eAAAX,KAAAI,OAAAM,GAAAJ,MAAA,gBAEAM,YAJA,SAIAF,GACAG,EAAA,8CAAAC,KAAA,WACAd,KAAAe,SAAA,IAEAF,EAAA,yCAAAH,EAAA,KAAAM,SAAAC,YAAA,YAEAC,OAVA,WAUA,IAAAC,EAAAnB,KACA,GAAAA,KAAAH,KAAA,CAIA,IAAAM,EAAAL,EAAA,EAAAsB,WAAA,eACA,MAAAjB,EAAAkB,OAAA,CAIA,IAAAC,GACAzB,KAAAG,KAAAH,KACA0B,cAAApB,GAGA,OAAAH,KAAAD,GACQyB,EAAA,EAARC,MAAAC,IAAAJ,GAAAK,KAAA,SAAAC,GAAA,OAAAT,EAAAU,eAAAD,KAEQJ,EAAA,EAARC,MAAAK,KAAA9B,KAAAD,GAAAuB,GAAAK,KAAA,SAAAC,GAAA,OAAAT,EAAAU,eAAAD,UAXAG,OAAAC,QAAA,iBALAD,OAAAC,QAAA,aAmBAH,eA/BA,SA+BAD,GACA,KAAAA,EAAAK,MACAF,OAAAG,QAAAN,EAAAO,KACAC,WAAA,kBAAAtC,EAAA,EAAAuC,UAAA,aAEAN,OAAAO,MAAAV,EAAAO,KACAnC,KAAAuC,WAAA,IAGAC,OAxCA,WAyCMC,EAAA,EAANC,gBAGAC,QAvHA,aA0HAC,QA1HA,WA0HA,IAAAC,EAAA7C,KACI8C,EAAA,EAAJC,SACA,OAAA/C,KAAAD,IACMyB,EAAA,EAANC,MAAAuB,QAAAhD,KAAAD,IAAA4B,KAAA,SAAAC,GACA,QAAAA,EAAAK,KAAA,CACA,IAAAgB,KACAJ,EAAAhD,KAAA+B,EAAA9B,KAAAD,KACAgD,EAAAzC,OAAA8C,IAAA,SAAAC,GACAA,EAAA7C,MAAA4C,IAAA,SAAAE,GACAvC,EAAAwC,QAAAD,EAAA7C,IAAAqB,EAAA9B,KAAAmD,aAAA,GACAA,EAAAK,KAAAF,EAAArD,QAIUD,EAAA,EAAVa,eAAAsC,EAAA,oBC3LeM,GADEC,OAFjB,WAA0B,IAAAC,EAAAzD,KAAa0D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,4BAAsCF,EAAA,OAAYE,YAAA,yBAAmCL,EAAAM,GAAA,GAAAN,EAAAO,GAAA,KAAAJ,EAAA,OAAkCE,YAAA,iBAA2BF,EAAA,QAAaE,YAAA,kBAAAG,IAAkC/C,OAAA,SAAAgD,GAAkD,OAAxBA,EAAAC,iBAAwBV,EAAAvC,OAAAgD,OAA4BN,EAAA,OAAYE,YAAA,eAAyBF,EAAA,OAAYE,YAAA,sBAAgCF,EAAA,SAAcE,YAAA,2BAAqCL,EAAAO,GAAA,WAAAP,EAAAO,GAAA,KAAAJ,EAAA,OAA0CE,YAAA,aAAuBF,EAAA,SAAcQ,aAAavE,KAAA,QAAAwE,QAAA,UAAAC,MAAAb,EAAA,KAAAc,WAAA,SAAkET,YAAA,eAAAU,OAAoCC,KAAA,QAAcC,UAAWJ,MAAAb,EAAA,MAAmBQ,IAAKU,MAAA,SAAAT,GAAyBA,EAAAU,OAAAC,YAAsCpB,EAAA5D,KAAAqE,EAAAU,OAAAN,eAA+Bb,EAAAO,GAAA,KAAAJ,EAAA,OAA4BE,YAAA,sBAAgCF,EAAA,UAAeE,YAAA,kBAAAU,OAAqCC,KAAA,YAAiBhB,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAqCE,YAAA,gBAAAG,IAAgCa,MAAArB,EAAAjB,UAAoBiB,EAAAO,GAAA,YAAAP,EAAAO,GAAA,KAAAP,EAAAsB,GAAAtB,EAAA,gBAAA3D,EAAAY,GAA0E,OAAAkD,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,OAAYE,YAAA,uBAAiCF,EAAA,OAAYE,YAAA,sBAAgCF,EAAA,SAAcE,YAAA,UAAoBL,EAAAO,GAAAP,EAAAuB,GAAAlF,EAAAO,UAAAoD,EAAAO,GAAA,KAAAJ,EAAA,KAAmDK,IAAIa,MAAA,SAAAZ,GAAyBT,EAAAhD,YAAAC,OAAyB+C,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAqCK,IAAIa,MAAA,SAAAZ,GAAyBT,EAAA7C,YAAAF,OAAyB+C,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAJ,EAAA,OAA4CE,YAAA,sBAAiCL,EAAAsB,GAAAjF,EAAA,eAAAmF,GAAoC,OAAArB,EAAA,OAAiBE,YAAA,sBAAgCF,EAAA,OAAYE,YAAA,sBAAgCF,EAAA,SAAAA,EAAA,SAA0BY,OAAO3E,KAAA,cAAAqF,YAAA,eAAAxE,EAAA+D,KAAA,YAA0EC,UAAWJ,MAAAW,EAAAlF,MAAiB6D,EAAA,KAAAH,EAAAO,GAAAP,EAAAuB,GAAAC,EAAA5E,sBAAgD,UAE/0D8E,iBADjB,WAAoC,IAAazB,EAAb1D,KAAa2D,eAA0BC,EAAvC5D,KAAuC6D,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,MAAzG5D,KAAyGgE,GAAA,gBCE7I,IAcAoB,EAdyBC,EAAQ,OAcjCC,CACE1F,EACA2D,GATF,EAVA,SAAAgC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/43.e0bba338e1c81a7abe7b.js","sourcesContent":["<template>\n  <div class=\"wrapper wrapper-content\">\n\n    <div class=\"ibox float-e-margins\">\n      <div class=\"ibox-title\">\n        <h5>用户组详情</h5>\n      </div>\n\n      <div class=\"ibox-content\">\n        <form class=\"form-horizontal\" @submit.prevent=\"submit\">\n\n          <div class=\"form-group\">\n            <div class=\"col-lg-4 col-sm-6\">\n              <label class=\"col-sm-4 control-label\">用户组名称</label>\n              <div class=\"col-sm-8\">\n                <input type=\"text\" class=\"form-control\" v-model=\"name\">\n              </div>\n            </div>\n            <div class=\"col-lg-3 col-sm-6\">\n              <button type=\"submit\" class=\"btn btn-primary\">保存</button>\n              <b class=\"btn btn-white\" @click=\"cancel\">取消</b>\n            </div>\n          </div>\n\n          <div class=\"form-group\" v-for=\"(data, index) of groups\">\n            <div class=\"col-lg-3 col-sm-12\">\n              <div class=\"checkbox i-checks\">\n                <label class=\"title\">{{ data.title }}</label>\n                <a @click=\"selectGroup(index)\">全选</a>\n                <a @click=\"cancelGroup(index)\">全不选</a>\n              </div>\n            </div>\n            <div class=\"col-lg-9 col-sm-12\">\n              <div class=\"col-lg-4 col-sm-6\" v-for=\"item of data.group\">\n                <div class=\"checkbox i-checks\">\n                  <label>\n                    <input name=\"permissions\" :data-name=\"'permissions-' + index\" type=\"checkbox\" :value=\"item.id\"><i></i>{{ item.title }}</label>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </form>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport tabsService from '@/assets/template/tabs'\nimport dataService from '@/assets/method/data'\nimport utilizeService from '@/assets/template/utilize'\nimport Service from '@/assets/service/service'\nexport default {\n  name: 'RoleDetails',\n  data () {\n    return {\n      id: this.$route.params['id'],\n      permissions: [],\n      name: '',\n      /**\n       1\t管理员\tadmin           2\t内容管理\tcontent_management   3\t添加字段\tadd_field\n       4\t修改字段\tupdate_field  5\t删除字段\tdrop_field           6\t添加用户\tpost_user\n       7\t修改用户\tupdate_user   8\t删除用户\tdelete_user          9\t新建角色\tpost_role\n       10\t删除角色\tdelete_role   11\t修改角色\tupdate_role       12\t修改公告\tupdate_notification\n       13\t删除公告\tdelete_notification 14\t新增公告 post_notification  15\t置顶公告\ttop_notification\n       16\t备份数据\tback_up       17\t基本信息\tbasic_information  18\t学术成果\tacademic_achievements\n       19\t人才培养\ttalent_development  20\t评分系统\tscore         21\t管理工作\tmanagement_work\n       **/\n      groups: [\n        {\n          title: '内容管理',\n          group: [\n            { title: '审批&页面设置', id: 2, key: 'content_management' }\n          ]\n        },\n        {\n          title: '字段管理',\n          group: [\n            { title: '添加字段', id: 3, key: 'add_field' },\n            { title: '修改字段', id: 4, key: 'update_field' },\n            { title: '删除字段', id: 5, key: 'drop_field' }\n          ]\n        },\n        {\n          title: '用户组管理',\n          group: [\n            { title: '添加用户组', id: 9, key: 'post_role' },\n            { title: '修改用户组', id: 11, key: 'update_role' },\n            { title: '删除用户组', id: 10, key: 'delete_role' }\n          ]\n        },\n        {\n          title: '用户管理',\n          group: [\n            { title: '添加用户', id: 6, key: 'post_user' },\n            { title: '修改用户', id: 7, key: 'update_user' },\n            { title: '删除用户', id: 8, key: 'delete_user' }\n          ]\n        },\n        {\n          title: '公告管理',\n          group: [\n            { title: '添加公告', id: 14, key: 'post_notification' },\n            { title: '修改公告', id: 12, key: 'update_notification' },\n            { title: '删除公告', id: 13, key: 'delete_notification' },\n            { title: '置顶公告', id: 15, key: 'top_notification' }\n          ]\n        },\n        {\n          title: '数据管理',\n          group: [\n            { title: '备份数据库', id: 16, key: 'back_up' }\n          ]\n        },\n        {\n          title: '管理模块',\n          group: [\n            { title: '基本信息', id: 17, key: 'basic_information' },\n            { title: '学术成果', id: 18, key: 'academic_achievements' },\n            { title: '人才培养', id: 19, key: 'talent_development' },\n            { title: '评分系统', id: 20, key: 'score' },\n            { title: '管理工作', id: 21, key: 'management_work' }\n          ]\n        }\n      ]\n    }\n  },\n  methods: {\n    selectGroup (index) {\n      dataService.setCheckBoxVal(this.groups[index].group, 'permissions')\n    },\n    cancelGroup (index) {\n      $('.checkbox .checked input[name=permissions]').each(function () {\n        this.checked = false\n      })\n      $('.checkbox input[data-name=permissions-' + index + ']').parent().removeClass('checked')\n    },\n    submit () {\n      if (!this.name) {\n        toastr.warning('请输入用户组名称')\n        return\n      }\n      const permissions = dataService.getChecked('permissions')\n      if (permissions.length == 0) {\n        toastr.warning('请勾选用户组权限')\n        return\n      }\n      const request = {\n        name: this.name,\n        permission_id: permissions\n      }\n\n      if (this.id == 'new') {\n        Service.Roles.add(request).then(response => this.responseHandle(response))\n      } else {\n        Service.Roles.edit(this.id, request).then(response => this.responseHandle(response))\n      }\n    },\n    responseHandle (response) {\n      if (response.code == 200) {\n        toastr.success(response.msg)\n        setTimeout(() => dataService.tabReload(601), 1000)\n      } else {\n        toastr.error(response.msg)\n        this.canSubmit = true\n      }\n    },\n    cancel () {\n      tabsService.closeNowTab()\n    }\n  },\n  created () {\n\n  },\n  mounted () {\n    utilizeService.iCheck()\n    if (this.id != 'new') {\n      Service.Roles.details(this.id).then(response => {\n        if (response.code == 200) {\n          const permission = []\n          this.name = response.data.name\n          this.groups.map(groupData => {\n            groupData.group.map(option => {\n              if ($.inArray(option.key, response.data.permission) > -1) {\n                permission.push(option.id)\n              }\n            })\n          })\n          dataService.setCheckBoxVal(permission, 'permissions')\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .btn {\n    margin-bottom: 0;\n  }\n  label.title {\n    font-size: 18px;\n    font-weight: bold;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/User/roleDetails.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper wrapper-content\"},[_c('div',{staticClass:\"ibox float-e-margins\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"ibox-content\"},[_c('form',{staticClass:\"form-horizontal\",on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"col-lg-4 col-sm-6\"},[_c('label',{staticClass:\"col-sm-4 control-label\"},[_vm._v(\"用户组名称\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-8\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"col-lg-3 col-sm-6\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('b',{staticClass:\"btn btn-white\",on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])])]),_vm._v(\" \"),_vm._l((_vm.groups),function(data,index){return _c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"col-lg-3 col-sm-12\"},[_c('div',{staticClass:\"checkbox i-checks\"},[_c('label',{staticClass:\"title\"},[_vm._v(_vm._s(data.title))]),_vm._v(\" \"),_c('a',{on:{\"click\":function($event){_vm.selectGroup(index)}}},[_vm._v(\"全选\")]),_vm._v(\" \"),_c('a',{on:{\"click\":function($event){_vm.cancelGroup(index)}}},[_vm._v(\"全不选\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-lg-9 col-sm-12\"},_vm._l((data.group),function(item){return _c('div',{staticClass:\"col-lg-4 col-sm-6\"},[_c('div',{staticClass:\"checkbox i-checks\"},[_c('label',[_c('input',{attrs:{\"name\":\"permissions\",\"data-name\":'permissions-' + index,\"type\":\"checkbox\"},domProps:{\"value\":item.id}}),_c('i'),_vm._v(_vm._s(item.title))])])])}))])})],2)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ibox-title\"},[_c('h5',[_vm._v(\"用户组详情\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5d232b22\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/User/roleDetails.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5d232b22\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./roleDetails.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleDetails.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleDetails.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d232b22\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./roleDetails.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5d232b22\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/User/roleDetails.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}